import{p as e,R as C,w as v,a as c}from"./chunk-PVWAREVJ-DMlOENv6.js";const N=({plant:t})=>e.jsxs("div",{className:"plant-card",children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"plant-image"}),e.jsx("h3",{children:t.name}),e.jsxs("p",{children:["Price: $",t.price.toFixed(2)]}),e.jsxs("p",{children:["Categories: ",t.categories.join(", ")]}),e.jsxs("p",{children:["Stock: ",t.stockAvailability?"Yes":"No"]})]}),P=({plants:t})=>e.jsx("div",{className:"plant-list",children:t.map(s=>e.jsx(N,{plant:s},s._id))}),w=({onSearch:t})=>{const[s,l]=C.useState(""),i=o=>{l(o.target.value)},r=o=>{o.preventDefault(),t(s)};return e.jsxs("form",{onSubmit:r,className:"search-bar",children:[e.jsx("input",{type:"text",placeholder:"Search plants by name...",value:s,onChange:i}),e.jsx("button",{type:"submit",children:"Search"})]})},b=({categories:t,onFilter:s,selectedCategory:l})=>{const i=r=>{s(r.target.value)};return e.jsxs("div",{className:"category-filter",children:[e.jsx("label",{htmlFor:"category-select",children:"Filter by Category:"}),e.jsxs("select",{id:"category-select",onChange:i,value:l,children:[e.jsx("option",{value:"",children:"All Categories"}),t.map(r=>e.jsx("option",{value:r,children:r},r))]})]})},T=v(function(){const[s,l]=c.useState([]),[i,r]=c.useState([]),[o,g]=c.useState(!0),[h,p]=c.useState(null),[u,j]=c.useState(""),[d,f]=c.useState(""),x=c.useCallback(async()=>{g(!0),p(null);try{const a=new URLSearchParams;u&&a.append("name",u),d&&a.append("category",d);const n=await fetch(`/api/plants?${a.toString()}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const m=await n.json();l(m)}catch(a){p(a.message)}finally{g(!1)}},[u,d]);c.useEffect(()=>{x()},[x]),c.useEffect(()=>{(async()=>{try{const n=await fetch("/api/categories");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const m=await n.json();r(m)}catch(n){console.error("Failed to fetch categories:",n)}})()},[]);const S=a=>{j(a)},y=a=>{f(a)};return e.jsxs("div",{className:"container page-content",children:[e.jsx("h1",{className:"page-title",children:"Urvann Mini Plant Store"}),e.jsxs("div",{className:"search-filter-container",children:[e.jsx(w,{onSearch:S}),e.jsx(b,{categories:i,onFilter:y,selectedCategory:d})]}),o&&e.jsx("div",{className:"loading-state",children:"Loading plants..."}),h&&e.jsxs("div",{className:"error-state",children:["Error: ",h]}),!o&&!h&&s.length===0&&e.jsx("div",{className:"no-results",children:"No plants found."}),!o&&!h&&s.length>0&&e.jsx(P,{plants:s})]})});export{T as default};
