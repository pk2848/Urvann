import{w as U,a as n,p as t}from"./chunk-PVWAREVJ-DMlOENv6.js";const $=()=>{const j=n.useRef(null),[P,w]=n.useState([]),[o,c]=n.useState(""),[d,u]=n.useState(""),[m,h]=n.useState(""),[x,p]=n.useState(!0),[b,g]=n.useState(""),[N,a]=n.useState(null),[E,i]=n.useState(!1),[l,y]=n.useState(null),f=async()=>{try{const e=await fetch("/api/plants");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json();w(r)}catch(e){a(`Error fetching plants: ${e.message}`),i(!0)}};n.useEffect(()=>{f()},[]);const k=async e=>{if(e.preventDefault(),a(null),i(!1),!o||!d||!m){a("Please fill in all required fields."),i(!0);return}const r={name:o,price:Number(d),categories:m.split(",").map(s=>s.trim()),stockAvailability:x,imageUrl:b};try{const s=await fetch("/api/plants",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const v=await s.json();throw new Error(v.message||`HTTP error! status: ${s.status}`)}a("Plant added successfully!"),c(""),u(""),h(""),p(!0),g(""),f()}catch(s){a(`Error adding plant: ${s.message}`),i(!0)}},S=async e=>{if(window.confirm("Are you sure you want to delete this plant?")){a(null),i(!1);try{const r=await fetch(`/api/plants/${e}`,{method:"DELETE"});if(!r.ok){const s=await r.json();throw new Error(s.message||`HTTP error! status: ${r.status}`)}a("Plant deleted successfully!"),f()}catch(r){console.error("Error deleting plant:",r),a(`Error deleting plant: ${r.message}`),i(!0)}}},C=e=>{y(e),c(e.name),u(e.price),h(e.categories.join(", ")),j.current&&j.current.scrollIntoView({behavior:"smooth",block:"start"})},T=async e=>{if(e.preventDefault(),a(null),i(!1),!l)return;if(!o||!d||!m){a("Please fill in all required fields."),i(!0);return}const r={name:o,price:Number(d),categories:m.split(",").map(s=>s.trim()),stockAvailability:x,imageUrl:b};try{const s=await fetch(`/api/plants/${l._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const v=await s.json();throw new Error(v.message||`HTTP error! status: ${s.status}`)}a("Plant updated successfully!"),y(null),c(""),u(""),h(""),p(!0),g(""),f()}catch(s){a(`Error updating plant: ${s.message}`),i(!0)}},A=()=>{y(null),c(""),u(""),h(""),p(!0),g("")};return t.jsxs("div",{className:"admin-container page-content",children:[t.jsx("h1",{children:l?"Edit Plant":"Admin - Add New Plant"}),N&&t.jsx("div",{className:E?"error-message":"success-message",children:N}),t.jsxs("form",{ref:j,className:"add-plant-form",onSubmit:l?T:k,children:[t.jsx("h2",{children:l?"Edit Plant":"Add New Plant"}),t.jsxs("div",{className:"form-grid",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"name",children:"Plant Name:"}),t.jsx("input",{type:"text",id:"name",name:"name",value:o,onChange:e=>c(e.target.value),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"price",children:"Price:"}),t.jsx("input",{type:"number",id:"price",name:"price",value:d,onChange:e=>u(Number(e.target.value)),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"categories",children:"Categories (comma-separated):"}),t.jsx("input",{type:"text",id:"categories",name:"categories",value:m,onChange:e=>h(e.target.value),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"imageUrl",children:"Image URL:"}),t.jsx("input",{type:"url",id:"imageUrl",name:"imageUrl",value:b,onChange:e=>g(e.target.value)})]}),t.jsxs("div",{className:"form-group checkbox-group",children:[t.jsx("input",{type:"checkbox",id:"stockAvailability",name:"stockAvailability",checked:x,onChange:e=>p(e.target.checked)}),t.jsx("label",{htmlFor:"stockAvailability",children:"In Stock"})]})]}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{type:"submit",className:"add-plant-form button",children:l?"Update Plant":"Add Plant"}),l&&t.jsx("button",{type:"button",onClick:A,className:"cancel-button",children:"Cancel Edit"})]})]}),t.jsx("h2",{children:"Existing Plants"}),t.jsx("div",{className:"plant-list-container",children:P.length===0?t.jsx("p",{children:"No plants added yet."}):t.jsx("div",{className:"plant-grid",children:P.map(e=>t.jsxs("div",{className:"plant-card",children:[t.jsx("h3",{children:e.name}),t.jsxs("p",{children:["Price: $",e.price]}),t.jsxs("p",{children:["Categories: ",e.categories.join(", ")]}),t.jsxs("p",{children:["Stock: ",e.stockAvailability?"In Stock":"Out of Stock"]}),e.imageUrl&&t.jsx("img",{src:e.imageUrl,alt:e.name,className:"plant-image"}),t.jsxs("div",{className:"plant-actions",children:[t.jsx("button",{onClick:()=>C(e),className:"edit-button",children:"Edit"}),t.jsx("button",{onClick:()=>S(e._id),className:"delete-button",children:"Delete"})]})]},e._id))})})]})},I=U($);export{I as default};
